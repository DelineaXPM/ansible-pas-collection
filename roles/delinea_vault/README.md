# Delinea Vault Role 

## Description

This role installs, enrolls, unenrolls, and removes Delinea Privileged Access Services (PAS) on your systems. It supports RHEL/CentOS, Debian, and SUSE distributions.

## Requirements

- Ansible 2.9 or higher
- Supported OS:
  - RHEL/CentOS
  - Debian
  - SUSE

## Role Variables

The following variables can be customized:

### Common Variables

| Variable                    | Default Value | Description                                                                                     |
|-----------------------------|---------------|-------------------------------------------------------------------------------------------------|
| `delinea_vault_task`        | `install`     | Task to execute when running the playbook. Possible values: `install`, `enroll`, `unenroll`, `remove`. |
| `delinea_redhat_urltoken`   |               | URL Token for Delinea repo for Red Hat. No default value, must be set. Refer to [Delinea Download Center](https://support.delinea.com/s/repository) for more details. |
| `delinea_debian_urltoken`   |               | URL Token for Delinea repo for Debian. No default value, must be set. Refer to [Delinea Download Center](https://support.delinea.com/s/repository) for more details. |
| `delinea_suse_urltoken`     |               | URL Token for Delinea repo for SUSE. No default value, must be set. Refer to [Delinea Download Center](https://support.delinea.com/s/repository) for more details. |

### Delinea Privileged Access Services Variables

| Variable                            | Default Value                                                                          | Description                                                              |
|-------------------------------------|----------------------------------------------------------------------------------------|--------------------------------------------------------------------------|
| `delinea_vault_tenant_url`          |                                                                                        | Delinea PAS Platform tenant URL to use. Example: `https://company.my.centrify.net`. |
| `delinea_vault_cagent_url`          | `http://edge.centrify.com/products/cloud-service/WindowsAgent/Centrify/cagentinstaller.msi` | URL to download the Delinea Client for Windows from PAS Platform.        |
| `delinea_vault_registration_code`   |                                                                                        | Registration code for Delinea Client enrolment to the Delinea PAS Platform. Must be generated by a System Administrator. Example: `3JWTTQ3TZWM3AGEODG3LDVMXUYUGKADNU2IW13VXC8W1`. |
| `delinea_vault_features`            | `all`                                                                                  | Feature to enable at enrollment. Possible values: `all`, `agentauth`, `aapm`, `dmc`. |
| `delinea_vault_lapm`                | `true`                                                                                 | Enable Local Account Password Management for system account (i.e., root). Possible values: `true`, `false`. |
| `delinea_vault_tmp_password`        | `T3mp0r4ryP4ssw0rd!`                                                                   | Temporary password used for enabling management of local account passwords. This value will be immediately changed by the Delinea Vault and only used once for the vaulting process. |
| `delinea_vault_ccli`                | `true`                                                                                 | Use scripts to setup CentrifyCLI for DMC usage. Setup scripts are `setup_ccli.sh` and `setup_ccli.ps1` located in the `files` folder. Possible values: `true`, `false`. |

### Sudo Password for Operations

- If not using the root user, you must provide a password for sudo access for some command executions.
- It is recommended to use `--ask-become-pass` while running the playbook to avoid hardcoding passwords.

## Example Playbook

Here is an example of how to use this role in a playbook:

```yaml
- name: Manage Delinea Vault Services
  hosts: all
  roles:
    - role: my_namespace.delinea_vault
      vars:
        delinea_vault_task: install
        delinea_redhat_urltoken: "your_redhat_url_token"
        delinea_debian_urltoken: "your_debian_url_token"
        delinea_suse_urltoken: "your_suse_url_token"
        delinea_vault_tenant_url: "https://company.my.centrify.net"
        delinea_vault_registration_code: "your_registration_code"
        delinea_vault_features: all
        delinea_vault_lapm: true
        delinea_vault_tmp_password: "T3mp0r4ryP4ssw0rd!"
        delinea_vault_ccli: true
